@Master['Master']


@Section['Scripts']
<script type="text/javascript">
    
    function SubjectViewModel(subject, votes) {
        var self = this;

        self.subject = ko.observable(subject);
        self.votes = ko.observable(votes);

        self.addToVote = function () {
            var v = self.votes();
            self.votes(v + 1);
        };
    }

    function VotingViewModel() {
        var self = this;

        self.subjectList = ko.observableArray([]);

        self.newSubject = ko.observable();

        self.addSubject = function () {
            var subj = new SubjectViewModel(self.newSubject(), 1);
            self.subjectList.push(subj);
            self.newSubject('');
        };
    }

    $(function () {
        var viewModel = new VotingViewModel();
        ko.applyBindings(viewModel);
    });
</script>
@EndSection

@Section['Header']
<h2>Omröstning</h2>
@EndSection


@Section['MainContent']

<div>
    Vad ska nästa utvecklarfika handla om?
</div>

<table class="zebra-striped">
    <thead>
        <tr>
            <th>Ämne</th>
            <th>Röster</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: subjectList">
        <tr>
            <td data-bind="text: subject"></td>
            <td data-bind="text: votes"></td>
            <td><button data-bind="click: addToVote" class="btn">Rösta!</button></td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>
                <form data-bind="submit: addSubject">
                    <input type="text" data-bind="value: newSubject" name="subject"/>
                    <input type="submit" class="btn primary" value="Lägg till"/>
                </form>
            </td>
            <td colspan="2">6</td>
        </tr>
    </tbody>
</table>

@EndSection

@Section['Sidebar']

@EndSection



